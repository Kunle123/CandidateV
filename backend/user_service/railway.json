{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "pip install -r requirements.txt && mkdir -p shared/contracts && cp -r ../shared/contracts/* shared/contracts/ && alembic upgrade head"
  },
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3,
    "startCommand": "python main.py"
  },
  "healthcheck": {
    "path": "/api/health",
    "interval": 30,
    "timeout": 5,
    "retries": 3
  },
  "environment": {
    "PORT": "8001",
    "variables": {
      "USE_LOCAL_STORAGE": "false",
      "S3_BUCKET_NAME": "candidatev-user-uploads",
      "S3_REGION": "us-east-1",
      "DB_POOL_SIZE": "20",
      "DB_MAX_OVERFLOW": "30",
      "DB_POOL_TIMEOUT": "30",
      "DB_POOL_RECYCLE": "1800"
    },
    "secrets": [
      "S3_ACCESS_KEY",
      "S3_SECRET_KEY",
      "JWT_SECRET",
      "DATABASE_URL"
    ]
  }
} 